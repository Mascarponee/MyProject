"use strict";
var proc = require("child_process");
var StdIODriver = (function () {
    function StdIODriver() {
    }
    StdIODriver.prototype.connect = function (done) {
        this.tssserver = proc.spawn("tsserver");
        this.tssserver.on("error", console.error);
        setTimeout(done, 100);
    };
    StdIODriver.prototype.setMessageHandler = function (onMessage) {
        this.tssserver.stdout.on("data", function (message) {
            // console.log(message.toString());
            onMessage(message.toString());
        });
    };
    StdIODriver.prototype.send = function (message) {
        this.tssserver.stdin.write(message);
    };
    return StdIODriver;
}());
module.exports = StdIODriver;
//# sourceMappingURL=StdIODriver.js.map